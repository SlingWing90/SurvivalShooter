this.createjs=this.createjs||{},function(){var t=function(n){this.initialize(n)},n=t.prototype;n.debugMode=!0,n.originX=0,n.originY=0,n.velocityX=0,n.velocityY=0,n.linearVelocityX=0,n.linearVelocityY=0,n.radialVelocity=0,n.tangentalVelocity=0,n.radialAcceleration=0,n.tangentalAcceleration=0,n.linearAccelerationX=0,n.linearAccelerationY=0,n.particleBaseId=0,n._lastUpdateTimeMs=0,n.initialize=function(n){this._particleObject=n},n.initializeProperties=function(n){this.particleBaseId=n},n.updateParticle=function(){var n=createjs.Ticker.getTime();this.updatePosition(n)},n.updatePosition=function(n){var i=n-this._lastUpdateTimeMs,t=i/1e3;if(this._lastUpdateTimeMs<=0){this._lastUpdateTimeMs=n;return}this.velocityX=0,this.velocityY=0,this._processLinearAcceleration(t),this._processRadialAcceleration(t),this._processTangentalAcceleration(t),this._processLinearVelocity(t),this._processRadialAndTangentalVelocity(t),this._processVelocity(),this._lastUpdateTimeMs=n},n._processLinearAcceleration=function(n){var t=this.linearAccelerationX*n,i=this.linearAccelerationY*n;this.linearVelocityX+=t,this.linearVelocityY+=i},n._processRadialAcceleration=function(n){var t=this.radialAcceleration*n;this.radialVelocity+=t},n._processTangentalAcceleration=function(n){var t=this.tangentalAcceleration*n;this.tangentalVelocity+=t},n._processLinearVelocity=function(n){var t=this.linearVelocityY*n,i=this.linearVelocityX*n;this.velocityX+=i,this.velocityY+=t},n._processRadialAndTangentalVelocity=function(n){var t=this._getParticleCenter(),r=this.originY-t.y,u=this.originX-t.x,i=Math.atan2(r,u);this._processRadialVelocity(n,i),this._processTangentalVelocity(n,i)},n._processRadialVelocity=function(n,t){var i=this.radialVelocity*n*Math.cos(t),r=this.radialVelocity*n*Math.sin(t);this.velocityX+=i,this.velocityY+=r},n._processTangentalVelocity=function(n,t){var i=this.tangentalVelocity*n*Math.cos(t-Math.PI/2),r=this.tangentalVelocity*n*Math.sin(t-Math.PI/2);this.velocityX+=i,this.velocityY+=r},n._processVelocity=function(){this._particleObject.x+=this.velocityX,this._particleObject.y+=this.velocityY},n._getParticleCenter=function(){return{x:this._particleObject.x,y:this._particleObject.y}},n._debugText=function(n){this.debugMode&&console.log(n)},createjs.BaseParticle=t}(),this.createjs=this.createjs||{},function(){var t=function(n){this.initialize(n)},n=t.prototype=new createjs.Bitmap;n.Bitmap_initialise=n.initialize,n.Bitmap_draw=n.draw,n.Bitmap_updateContext=n.updateContext,n.particleId=0,n._baseParticle=null,n.initialize=function(n){this.Bitmap_initialise(n),this._baseParticle=new createjs.BaseParticle(this)},n.initializeProperties=function(n){this.particleId=n,this._baseParticle.initializeProperties(n)},n.updateContext=function(n){this._baseParticle.updateParticle(),this.Bitmap_updateContext(n)},createjs.BitmapParticle=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(n){n!=null&&(this.image=n),this.initialize()},n=t.prototype=new createjs.DisplayObject;createjs.ParticleEmitterState={Created:0,Running:1,Finished:2},createjs.ParticleEmitterType={Emit:0,OneShot:1},n.REMAIN_UNCHANGED=null,n.INFINITE=-1,n.DisplayObject_initialise=n.initialize,n.DisplayObject_draw=n.draw,n.DisplayObject_updateContext=n.updateContext,n.autoRemoveOnFinished=!1,n.debugMode=!1,n.duration=n.INFINITE,n.emitterType=createjs.ParticleEmitterType.Emit,n.maxParticles=200,n.emissionRate=1,n.state=createjs.ParticleEmitterState.Created,n.image=null,n.accelerationX=0,n.accelerationY=0,n.angle=0,n.angleVar=0,n.endOpacity=n.REMAIN_UNCHANGED,n.endColor=n.REMAIN_UNCHANGED,n.endColorVar=[0,0,0],n.endSize=n.REMAIN_UNCHANGED,n.endSizeVar=0,n.endSpin=n.REMAIN_UNCHANGED,n.endSpinVar=0,n.life=4e3,n.lifeVar=0,n.positionVarX=0,n.positionVarY=0,n.radialAcceleration=0,n.radialAccelerationVar=0,n.speed=10,n.speedVar=0,n.startOpacity=1,n.startColor=[255,0,0],n.startColorVar=[0,0,0],n.startSize=20,n.startSizeVar=0,n.startSpin=0,n.startSpinVar=0,n.tangentalAcceleration=0,n.tangentalAccelerationVar=0,n._totalEmitted=0,n._timeStarted=0,n._timeLastParticleEmitted=0,n._particles=[],n.reset=function(){for(var n,t;this._particles.length>0;){if(n=this._particles[0],n.filters!=null)for(t in n.filters)createjs.Tween.removeTweens(n.filters[t]);n.uncache(),createjs.Tween.removeTweens(n),this._particles.splice(0,1),this.parent.removeChild(n)}this._timeLastParticleEmitted=0,this.state=createjs.ParticleEmitterState.Created},n.initialize=function(){this.DisplayObject_initialise()},n.updateContext=function(t){var i,r;if(this.DisplayObject_updateContext(t),i=createjs.Ticker.getTime(),this.state==createjs.ParticleEmitterState.Created?(this._timeStarted=i,this.state=createjs.ParticleEmitterState.Running):this.duration!=this.INFINITE&&i>this._timeStarted+this.duration&&(this.state=createjs.ParticleEmitterState.Finished),this.state==createjs.ParticleEmitterState.Running)switch(this.emitterType){case createjs.ParticleEmitterType.OneShot:this._oneShot(i);break;case createjs.ParticleEmitterType.Emit:default:this._emit(i)}else this.state==createjs.ParticleEmitterState.Finished&&this.autoRemoveOnFinished&&this.parent.removeChild(this);if(this.endColor!=n.REMAIN_UNCHANGED)for(r=0;r<this._particles.length;r++)this._particles[r].updateCache()},n._emit=function(n){var t=1e3/this.emissionRate;n>this._timeLastParticleEmitted+t&&this._particles.length<this.maxParticles&&(this._generateParticle(),this._timeLastParticleEmitted=n)},n._oneShot=function(n){if(this._particles.length==0){for(var t=0;t<this.maxParticles;t++)this._generateParticle();this._timeLastParticleEmitted=n}},n._generateParticle=function(){var s=this,o;this._debugText("generateParticle");var h=this.startOpacity,e=this._getColor(this.startColor,this.startColorVar),t=this._getVariedValue(this.startSize,this.startSizeVar,!0),c=this._getVariedValue(this.startSpin,this.startSpinVar,!1),f=this.endColor==this.REMAIN_UNCHANGED?this.startColor:this._getColor(this.endColor,this.endColorVar),l=this.endSize==this.REMAIN_UNCHANGED?this.startSize:this._getVariedValue(this.endSize,this.endSizeVar,!0),a=this.endSpin==this.REMAIN_UNCHANGED?this.startSpin:this._getVariedValue(this.endSpin,this.endSpinVar,!0),v=this.endOpacity==this.REMAIN_UNCHANGED?this.startOpacity:this.endOpacity,i=l/t,y=this._getVariedValue(this.speed,this.speedVar,!0),r=this._getVariedValue(this.life,this.lifeVar,!0),p=this._getAngle(this.angle,this.angleVar),w=y*r/1e3,b={x:this._getVariedValue(this.position.x,this.positionVarX,!1),y:this._getVariedValue(this.position.y,this.positionVarY,!1)},u=this._getPositionInDirection(this.position,p,w),k=u.x-this.position.x,d=u.y-this.position.y,n=this._createParticle(b,e,h,t,c,r,k,d);this.parent.addChild(n),o=this._createColorFilter(n,e),this.image==null?n.cache(0,0,t,t):n.cache(0,0,this.image.width,this.image.height,t/this.image.width),i=i*n.scaleX,createjs.Tween.get(n).to({scaleX:i,scaleY:i,rotation:a,alpha:v},r).call(function(){s._onParticleFinished(n)}),createjs.Tween.get(o).to({redMultiplier:f[0]/255,greenMultiplier:f[1]/255,blueMultiplier:f[2]/255},r),this._particles.push(n),this._totalEmitted++,this._debugText(this._format("Particle [s_x:{0}, s_y:{1}, e_x:{2}, e_y:{3}]",this.position.x,this.position.y,u.x,u.y))},n._createColorFilter=function(n,t){var i=new createjs.ColorFilter(t[0]/255,t[1]/255,t[2]/255,1);return n.filters=[i],i},n._createParticle=function(n,t,i,r,u,f,e,o){var s=null,h,c;return s=this.image!=null?this._createImageParticle(t,r):this._createCircleParticle(t,r),h=this.image!=null?this.image.width:r,c=this.image!=null?this.image.height:r,s._baseParticle.originX=this.position.x,s._baseParticle.originY=this.position.y,s._baseParticle.linearVelocityX=e/f*1e3,s._baseParticle.linearVelocityY=o/f*1e3,s._baseParticle.linearAccelerationX=this.accelerationX,s._baseParticle.linearAccelerationY=this.accelerationY,s._baseParticle.radialAcceleration=this._getVariedValue(this.radialAcceleration,this.radialAccelerationVar,!1),s._baseParticle.tangentalAcceleration=this._getVariedValue(this.tangentalAcceleration,this.tangentalAccelerationVar,!1),s.alpha=i,s.rotation=u,s.x=n.x,s.y=n.y,s.regX=h/2,s.regY=c/2,s.initializeProperties(this._totalEmitted),s},n._createImageParticle=function(n,t){var i=new createjs.BitmapParticle(this.image);return i.scaleX=t/this.image.width,i.scaleY=i.scaleX,i},n._createCircleParticle=function(n,t){var i=new createjs.ShapeParticle,r=createjs.Graphics.getRGB(255,255,255);return i.graphics.beginFill(r).drawCircle(t/2,t/2,t/2),i.alpha=255,i},n._debugText=function(n){this.debugMode&&console.log(n)},n._getPositionInDirection=function(n,t,i){var r=n.x+this._cosd(t)*i,u=n.y+this._sind(t)*i;return new createjs.Point(r,u)},n._getVariedValue=function(n,t,i){var u=this._intRandom(1)==1?1:-1,r=n+this._intRandom(t)*u;return(i||!1)&&(r=this._lowerLimit(r)),r},n._getAngle=function(n,t){var i=this._getVariedValue(n,t);return i=i<0?360+i:i,i>360?i-360:i},n._getColor=function(n,t){var i=t==null?n[0]:this._getVariedValue(n[0],t[0]),r=t==null?n[1]:this._getVariedValue(n[1],t[1]),u=t==null?n[2]:this._getVariedValue(n[2],t[2]);return i=this._rgbLimit(i),r=this._rgbLimit(r),u=this._rgbLimit(u),[i,r,u]},n._rgbLimit=function(n){var t=this._lowerLimit(n);return t>255?255:t},n._lowerLimit=function(n){return n<0?0:n},n._intRandom=function(n){return Math.floor(Math.random()*(n+1))},n._sind=function(n){return Math.sin(this._toRadians(n))},n._cosd=function(n){return Math.cos(this._toRadians(n))},n._toRadians=function(n){return n*Math.PI/180},n._format=function(){for(var t=arguments[0],i,n=0;n<arguments.length-1;n++)i=new RegExp("\\{"+n+"\\}","gm"),t=t.replace(i,arguments[n+1]);return t},n._onParticleFinished=function(n){n.uncache();var t=this._particles.indexOf(n);this._particles.splice(t,1),this.parent.removeChild(n),this._particles.length==0&&this.state==createjs.ParticleEmitterState.Running&&this.emitterType==createjs.ParticleEmitterType.OneShot&&(this.state=createjs.ParticleEmitterState.Finished)},createjs.ParticleEmitter=t}(),this.createjs=this.createjs||{},function(){var t=function(){this.initialize()},n=t.prototype=new createjs.Shape;n.Shape_initialise=n.initialize,n.Shape_draw=n.draw,n.Shape_updateContext=n.updateContext,n.particleId=0,n._baseParticle=null,n.initialize=function(){this.Shape_initialise(),this._baseParticle=new createjs.BaseParticle(this)},n.initializeProperties=function(n){this.particleId=n,this._baseParticle.initializeProperties(n)},n.updateContext=function(n){this.Shape_updateContext(n),this._baseParticle.updateParticle()},createjs.ShapeParticle=t}();
//@ sourceMappingURL=particleEmitterJs-0.5.0.min.js.map